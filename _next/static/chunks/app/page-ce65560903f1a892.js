(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3385:(e,r,t)=>{Promise.resolve().then(t.bind(t,3406))},3406:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>v});var o=t(5155),n=t(2115),s=t(1115);let a=(0,t(3915).Wp)({apiKey:"AIzaSyDanFNJLMpwhdUZY1eP5jDcY1U6wjlUTdM",authDomain:"boletas-influ.firebaseapp.com",databaseURL:"https://boletas-influ-default-rtdb.firebaseio.com",projectId:"boletas-influ",storageBucket:"boletas-influ.firebasestorage.app",messagingSenderId:"92186499156",appId:"1:92186499156:web:8f8e2dcc3d1f8cd60575c1",measurementId:"G-QNMGERW7BJ"}),i=(0,s.C3)(a);function l(e){return(0,s.TF)((0,s.KR)(i,"registros/".concat(e)))}function d(e,r){return(0,s.hZ)((0,s.KR)(i,"registros/".concat(e,"/status")),r)}function c(e){let r=(0,s.KR)(i,"configuracion");(0,s.Jt)(r).then(r=>{e(r.val())})}function u(e){let{connectionStatus:r}=e;return(0,o.jsxs)("header",{children:[(0,o.jsx)("h1",{children:"El Compae Hernan \uD83C\uDF81"}),(0,o.jsxs)("div",{className:"connection-indicator",id:"connectionIndicator",children:[(0,o.jsx)("div",{className:"connection-light ".concat(r),id:"connectionLight"}),(0,o.jsx)("span",{className:"connection-text",id:"connectionText",children:(()=>{switch(r){case"connecting":default:return"Conectando...";case"connected":return"Conectado";case"disconnected":return"Desconectado"}})()})]})]})}function m(e){let{selectedNumbers:r,numberStatus:t,loading:s,addSelectedNumber:a,removeSelectedNumber:i,registrosBloquados:l}=e,[d,c]=(0,n.useState)(""),[u,m]=(0,n.useState)([]);(0,n.useEffect)(()=>{m(Array.from({length:1e4},(e,r)=>r))},[]);let p=(0,n.useCallback)(()=>!!l&&(alert("\uD83D\uDEAB SELECCI\xd3N BLOQUEADA\n\nNo se pueden seleccionar n\xfameros porque los registros han sido cerrados.\n\nLa fecha l\xedmite del sorteo ha sido alcanzada."),!0),[l]),h=()=>{c(""),m(Array.from({length:1e4},(e,r)=>r))},g=()=>{let e=Array.from({length:1e4},(e,r)=>r);if(""===d.trim())m(e);else{let r=d.toLowerCase(),t=e.filter(e=>e.toString().padStart(4,"0").includes(r));m(t),t.length>0&&setTimeout(()=>{let e=document.querySelector('[data-number="'.concat(t[0],'"]'));e&&e.scrollIntoView({behavior:"smooth",block:"center"})},100)}};return s?(0,o.jsxs)("section",{className:"numbers-section glass",children:[(0,o.jsx)("h2",{children:"Selecciona tus n\xfameros"}),(0,o.jsxs)("div",{className:"search-wrapper",children:[(0,o.jsxs)("div",{className:"input-container",children:[(0,o.jsx)("input",{type:"text",id:"searchInput",placeholder:"Busca tu n\xfamero",maxLength:4,value:d,onChange:e=>c(e.target.value)}),(0,o.jsx)("button",{id:"clearSearch",type:"button",title:"Limpiar b\xfasqueda",onClick:h,children:"✖"})]}),(0,o.jsx)("button",{id:"searchBtn",type:"button",onClick:g,children:"Buscar"})]}),(0,o.jsx)("div",{id:"numbersLoadingSpinner",className:"numbers-loading",children:(0,o.jsxs)("div",{className:"loading-spinner-container",children:[(0,o.jsx)("div",{className:"loading-spinner"}),(0,o.jsx)("p",{children:"Cargando n\xfameros..."}),(0,o.jsx)("p",{className:"loading-subtext",children:"Generando 10,000 n\xfameros"})]})})]}):(0,o.jsxs)("section",{className:"numbers-section glass",children:[(0,o.jsx)("h2",{children:"Selecciona tus n\xfameros"}),(0,o.jsxs)("div",{className:"search-wrapper",children:[(0,o.jsxs)("div",{className:"input-container",children:[(0,o.jsx)("input",{type:"text",id:"searchInput",placeholder:"Busca tu n\xfamero",maxLength:4,value:d,onChange:e=>c(e.target.value),onKeyPress:e=>{"Enter"===e.key&&g()}}),(0,o.jsx)("button",{id:"clearSearch",type:"button",title:"Limpiar b\xfasqueda",onClick:h,children:"✖"})]}),(0,o.jsx)("button",{id:"searchBtn",type:"button",onClick:g,children:"Buscar"})]}),(0,o.jsx)("div",{id:"numberGrid",className:"scroll-grid",children:u.map(e=>(0,o.jsx)("button",{className:(e=>{var o;let n=(null==(o=t[e])?void 0:o.status)||"available";return r.has(e)?"number-btn selected":"confirmed"===n||"unavailable"===n?"number-btn unavailable":"pending"===n?"number-btn pending":"number-btn available"})(e),"data-number":e,onClick:()=>(e=>{var o;if(p())return;let n=(null==(o=t[e])?void 0:o.status)||"available";"pending"!==n&&"confirmed"!==n&&"unavailable"!==n&&(r.has(e)?i(e):a(e))})(e),disabled:(e=>{var r;let o=(null==(r=t[e])?void 0:r.status)||"available";return l||"confirmed"===o||"pending"===o||"unavailable"===o})(e),children:e.toString().padStart(4,"0")},e))}),(0,o.jsxs)("p",{id:"selectedCount",className:"selected-count-text",children:["Has seleccionado ",r.size," n\xfamero",1!==r.size?"s":"","."]})]})}function p(e){let{selectedNumbers:r,tiempoTemporizadorMinutos:t,registrosBloquados:a,clearSelectedNumbers:l,getTotalPrice:d,updateNumberStatus:c,registros:u,setRegistros:m,removeSelectedNumber:p}=e,[h,g]=(0,n.useState)({name:"",phone:""}),[x,f]=(0,n.useState)(!1),[b,j]=(0,n.useState)({message:"",type:"success",visible:!1}),[v,y]=(0,n.useState)(""),S=e=>{let{id:r,value:t}=e.target;g(e=>({...e,[r]:t})),"phone"===r&&y("")},N=(0,n.useCallback)(function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";j({message:e,type:r,visible:!0})},[]),C=async e=>{if(e.preventDefault(),j(e=>({...e,visible:!1})),0===r.size)return void N("Debes seleccionar al menos un n\xfamero.","error");if(!h.name.trim())return void N("El nombre es obligatorio.","error");if(!h.phone.trim()||!/^[0-9]{10}$/.test(h.phone))return void N("El tel\xe9fono debe tener exactamente 10 d\xedgitos.","error");if(u.find(e=>e.phone===h.phone.trim()&&("pending"===e.status||"verified"===e.status)))return void N("Este n\xfamero de tel\xe9fono ya est\xe1 registrado","error");f(!0);try{let e={id:Date.now().toString(),name:h.name.trim(),phone:h.phone.trim(),numbers:Array.from(r),timestamp:Date.now(),status:"pending",timeoutEnd:Date.now()+60*t*1e3};await function(e){console.log("Guardando registro en Firebase:",e);let r=(0,s.VC)((0,s.KR)(i,"registros"));return e.id=r.key,(0,s.hZ)(r,e).then(()=>(console.log("Registro guardado exitosamente:",e.id),e)).catch(e=>{throw console.error("Error al guardar registro:",e),e})}(e);let o=[...u,e];m(o),c(o),g({name:"",phone:""}),l(),N("Tienes ".concat(t," minutos para realizar el pago, recuerda poner tu n\xfamero de celular en el mensaje de pago para encontrarte r\xe1pidamente. \xa1Mucha suerte! ✨"),"success")}catch(e){console.error("Error al guardar registro:",e),N("Error al registrar. Int\xe9ntalo de nuevo.","error")}finally{f(!1)}};return(0,o.jsxs)("section",{className:"form-section glass",children:[(0,o.jsx)("h2",{children:"Registra tus n\xfameros"}),(0,o.jsxs)("form",{id:"registrationForm",onSubmit:C,children:[(0,o.jsx)("label",{htmlFor:"name",children:"Nombre"}),(0,o.jsx)("input",{type:"text",id:"name",placeholder:"Tu nombre completo",pattern:"[A-Za-z\xc0-\xff\\u00f1\\u00d1\\s]+",title:"Solo se permiten letras y espacios",minLength:2,maxLength:50,value:h.name,onChange:S,required:!0}),(0,o.jsx)("label",{htmlFor:"phone",children:"Tel\xe9fono"}),(0,o.jsx)("input",{type:"tel",id:"phone",placeholder:"Ej: 3001234567",pattern:"[0-9]{10}",title:"Debe tener exactamente 10 d\xedgitos (solo n\xfameros)",minLength:10,maxLength:10,value:h.phone,onChange:S,required:!0,style:{borderColor:v?"#dc3545":void 0}}),v&&(0,o.jsx)("div",{style:{color:"#dc3545",fontSize:"0.8rem",marginTop:"0.25rem",marginBottom:"0.5rem",padding:"0.5rem",backgroundColor:"rgba(220, 53, 69, 0.1)",border:"1px solid rgba(220, 53, 69, 0.3)",borderRadius:"4px",fontWeight:"bold"},children:v}),(0,o.jsx)("div",{id:"selectedNumbers",children:r.size>0&&(0,o.jsxs)("div",{className:"selected-numbers-display",children:[(0,o.jsx)("h3",{children:"N\xfameros seleccionados:"}),(0,o.jsx)("div",{className:"selected-numbers-list",children:Array.from(r).sort((e,r)=>e-r).map(e=>(0,o.jsxs)("span",{className:"selected-number-item",children:[e.toString().padStart(4,"0"),(0,o.jsx)("button",{type:"button",onClick:()=>p(e),className:"remove-number-btn",title:"Quitar n\xfamero",children:"✖"})]},e))})]})}),(0,o.jsxs)("p",{id:"totalDisplay",children:["Total a pagar: $",d().toLocaleString()]}),(0,o.jsx)("button",{type:"submit",disabled:x||a||""!==v&&r.size>0,style:{opacity:""!==v&&r.size>0?.5:void 0,cursor:""!==v&&r.size>0?"not-allowed":void 0},children:x?"Registrando...":""!==v&&r.size>0?"Tel\xe9fono ya registrado":"Registrar"})]}),b.visible&&(0,o.jsx)("div",{className:"form-notification ".concat(b.type),children:"success"===b.type?(0,o.jsxs)("div",{className:"notification-content",children:[(0,o.jsx)("button",{className:"notification-close",onClick:()=>{j(e=>({...e,visible:!1}))},children:"✖"}),(0,o.jsx)("span",{className:"notification-icon",children:"❤️"}),(0,o.jsxs)("div",{className:"notification-text",children:[(0,o.jsx)("div",{className:"notification-title",children:"Registro realizado"}),(0,o.jsx)("div",{className:"notification-subtitle",children:b.message}),(0,o.jsxs)("div",{className:"payment-info",children:[(0,o.jsxs)("div",{className:"payment-section",children:[(0,o.jsx)("div",{className:"payment-header",children:"\uD83D\uDCB3 Bancolombia"}),(0,o.jsx)("div",{className:"payment-number",children:"1234-5678-9012"})]}),(0,o.jsxs)("div",{className:"payment-section",children:[(0,o.jsx)("div",{className:"payment-header",children:"\uD83D\uDCF1 Nequi"}),(0,o.jsx)("div",{className:"payment-number",children:"321 456 7890"})]})]})]})]}):(0,o.jsxs)("div",{className:"notification-content-error",children:[(0,o.jsx)("span",{className:"notification-icon-error",children:"✖"}),(0,o.jsx)("div",{className:"notification-text-error",children:(0,o.jsx)("div",{className:"notification-message",children:b.message})})]})})]})}function h(e){let{registros:r,registrosLoading:t,setRegistrosLoading:a,getContadorRegistros:u,pricePerTicket:m,setPricePerTicket:p,tiempoTemporizadorMinutos:h,setTiempoTemporizadorMinutos:g,cargarConfiguracion:x,setRegistros:f,updateNumberStatus:b}=e,[j,v]=(0,n.useState)(!1),[y,S]=(0,n.useState)({valorBoleta:m,fechaInicioEvento:"",fechaSorteo:"",horaSorteo:"",horasAntesBloqueo:2,tiempoTemporizador:h}),N=()=>{if(!y.fechaSorteo||!y.horaSorteo)return null;let e=new Date("".concat(y.fechaSorteo,"T").concat(y.horaSorteo));if(isNaN(e.getTime()))return null;let r=new Date(e.getTime()-60*y.horasAntesBloqueo*6e4),t=new Date,o=r.getTime()-t.getTime();return o<=0?0:Math.ceil(o/36e5)},[C,D]=(0,n.useState)(new Map),[w,B]=(0,n.useState)(Date.now()),[k,z]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=setInterval(()=>{B(Date.now())},1e3);return()=>clearInterval(e)},[]),(0,n.useEffect)(()=>{{let e=()=>{z(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}},[]);let E=(0,n.useCallback)(async e=>{console.log("\uD83D\uDD50 Eliminando registro expirado con ID:",e);try{let t=C.get(e);t&&(clearTimeout(t),D(r=>{let t=new Map(r);return t.delete(e),t})),await l(e),f(r.filter(r=>r.id!==e)),b(r.filter(r=>r.id!==e)),console.log("✅ Registro expirado eliminado exitosamente")}catch(e){console.error("❌ Error al eliminar registro expirado:",e)}},[r,C,f,b]);(0,n.useEffect)(()=>(r.forEach(e=>{if("pending"===e.status&&e.id&&!C.has(e.id)){let r=Date.now(),t=e.timeoutEnd-r;if(t>0){console.log("⏰ Creando temporizador para:",e.name,"Tiempo restante:",Math.floor(t/1e3),"segundos");let r=setTimeout(()=>{E(e.id)},t);D(t=>new Map(t).set(e.id,r))}else E(e.id)}}),C.forEach((e,t)=>{let o=r.find(e=>e.id===t);o&&"pending"===o.status||(clearTimeout(e),D(e=>{let r=new Map(e);return r.delete(t),r}))}),()=>{C.forEach(e=>clearTimeout(e))}),[r,C,E]);let{confirmados:T,pendientes:R}=u(),I=r.filter(e=>"verified"===e.status).reduce((e,r)=>e+r.numbers.length,0),W=r.filter(e=>"pending"===e.status).reduce((e,r)=>e+r.numbers.length,0),A=async()=>{if(confirm("\xbfEst\xe1s seguro de que quieres eliminar TODOS los registros? Esta acci\xf3n no se puede deshacer.")){a(!0);try{await (0,s.TF)((0,s.KR)(i,"registros")),f([]),b([]),alert("Todos los registros han sido eliminados.")}catch(e){console.error("Error al eliminar registros:",e),alert("Error al eliminar registros.")}finally{a(!1)}}},q=async()=>{try{let e={valorBoleta:y.valorBoleta,fechaInicioEvento:y.fechaInicioEvento,fechaSorteo:y.fechaSorteo,horaSorteo:y.horaSorteo,horasAntesBloqueo:y.horasAntesBloqueo,tiempoTemporizador:y.tiempoTemporizador};await (0,s.hZ)((0,s.KR)(i,"configuracion"),e),p(y.valorBoleta),g(y.tiempoTemporizador),x(),v(!1),alert("Configuraci\xf3n guardada exitosamente.")}catch(e){console.error("Error al guardar configuraci\xf3n:",e),alert("Error al guardar configuraci\xf3n.")}},L=async e=>{try{console.log("\uD83D\uDD04 Confirmando pago para registro:",e);let t=C.get(e);t&&(clearTimeout(t),D(r=>{let t=new Map(r);return t.delete(e),t})),await d(e,"verified");let o=r.findIndex(r=>r.id===e);if(-1!==o){let e=[...r];e[o].status="verified",f(e),b(e),console.log("✅ Pago confirmado exitosamente"),alert("Pago confirmado. Los n\xfameros ahora est\xe1n registrados definitivamente y no disponibles para otros.")}}catch(e){console.error("❌ Error al confirmar pago:",e),alert("Error al confirmar el pago. Int\xe9ntalo de nuevo.")}},F=async e=>{if(confirm("\xbfEst\xe1s seguro de que quieres eliminar este registro?"))try{await l(e);let t=r.filter(r=>r.id!==e);f(t),b(t),alert("Registro eliminado exitosamente.")}catch(e){console.error("Error al eliminar registro:",e),alert("Error al eliminar registro.")}};return t?(0,o.jsxs)("section",{className:"registro-guardado glass",style:{marginTop:"2rem"},children:[(0,o.jsx)("h2",{children:"Registros Realizados"}),(0,o.jsx)("div",{id:"registrosLoadingSpinner",className:"registros-loading",children:(0,o.jsxs)("div",{className:"loading-spinner-container",children:[(0,o.jsx)("div",{className:"loading-spinner"}),(0,o.jsx)("p",{children:"Cargando registros..."}),(0,o.jsx)("p",{className:"loading-subtext",children:"Obteniendo informaci\xf3n actualizada"})]})})]}):(0,o.jsxs)("section",{className:"registro-guardado glass",style:{marginTop:"2rem"},children:[(0,o.jsx)("h2",{children:"Registros Realizados"}),(0,o.jsxs)("div",{id:"registroCounts",style:{textAlign:"right",fontWeight:"bold",marginBottom:"1rem"},children:[(0,o.jsxs)("span",{style:{color:"rgb(170, 170, 180)"},children:["Confirmados: ",(0,o.jsx)("span",{id:"confirmadosCount",children:I})]})," |"," ",(0,o.jsxs)("span",{style:{color:"rgb(170, 170, 180)"},children:["Pendientes: ",(0,o.jsx)("span",{id:"pendientesCount",children:W})]})]}),(0,o.jsxs)("div",{style:{textAlign:"center",marginBottom:"1rem"},children:[(0,o.jsx)("button",{id:"limpiarTodosBtn",onClick:A,style:{background:"#dc3545",color:"white",border:"none",padding:"0.8rem 1.5rem",borderRadius:"8px",fontWeight:"bold",cursor:"pointer",fontSize:"1rem",transition:"background 0.2s",marginRight:"0.5rem"},children:"\uD83D\uDDD1️ Limpiar Registros"}),(0,o.jsx)("button",{id:"configurarSorteoBtn",onClick:()=>{v(!j),j||c(e=>{e&&S({valorBoleta:e.valorBoleta||4e3,fechaInicioEvento:e.fechaInicioEvento||"",fechaSorteo:e.fechaSorteo||"",horaSorteo:e.horaSorteo||"",horasAntesBloqueo:e.horasAntesBloqueo||2,tiempoTemporizador:e.tiempoTemporizador||30})})},style:{background:"#2b2d3d",color:"rgb(255, 255, 255)",border:"none",padding:"0.8rem 1.5rem",borderRadius:"8px",fontWeight:"bold",cursor:"pointer",fontSize:"1rem",transition:"background 0.2s"},children:"⚙️ Configurar Sorteo"})]}),j&&(0,o.jsxs)("div",{id:"panelConfiguracion",children:[(0,o.jsx)("h3",{children:"⚙️ Configuraci\xf3n del Sorteo"}),(0,o.jsxs)("div",{className:"grid-inputs",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"valorBoletaInput",children:"\uD83D\uDCB0 Valor de la Boleta (COP):"}),(0,o.jsx)("input",{type:"number",id:"valorBoletaInput",min:"1000",step:"500",placeholder:"4000",value:y.valorBoleta,onChange:e=>S(r=>({...r,valorBoleta:parseInt(e.target.value)||4e3}))})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"fechaInicioEventoInput",children:"\uD83D\uDCC5 Fecha de Inicio del Evento:"}),(0,o.jsx)("input",{type:"date",id:"fechaInicioEventoInput",value:y.fechaInicioEvento,onChange:e=>S(r=>({...r,fechaInicioEvento:e.target.value}))})]})]}),(0,o.jsxs)("div",{className:"grid-inputs",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"fechaSorteoInput",children:"\uD83C\uDFAF Fecha del Sorteo:"}),(0,o.jsx)("input",{type:"date",id:"fechaSorteoInput",value:y.fechaSorteo,onChange:e=>S(r=>({...r,fechaSorteo:e.target.value}))})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"horaSorteoInput",children:"\uD83D\uDD50 Hora del Sorteo:"}),(0,o.jsx)("input",{type:"time",id:"horaSorteoInput",value:y.horaSorteo,onChange:e=>S(r=>({...r,horaSorteo:e.target.value}))})]})]}),(0,o.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,o.jsx)("label",{htmlFor:"horasAntesBloqueo",children:"Horas antes del sorteo para cerrar registros:"}),(0,o.jsxs)("select",{id:"horasAntesBloqueo",value:y.horasAntesBloqueo,onChange:e=>S(r=>({...r,horasAntesBloqueo:parseInt(e.target.value)})),children:[(0,o.jsx)("option",{value:"1",children:"1 hora antes"}),(0,o.jsx)("option",{value:"2",children:"2 horas antes"}),(0,o.jsx)("option",{value:"3",children:"3 horas antes"}),(0,o.jsx)("option",{value:"6",children:"6 horas antes"}),(0,o.jsx)("option",{value:"12",children:"12 horas antes"}),(0,o.jsx)("option",{value:"24",children:"24 horas antes"})]})]}),(0,o.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,o.jsx)("label",{htmlFor:"tiempoTemporizadorInput",children:"⏰ Tiempo del temporizador para confirmar pago (minutos):"}),(0,o.jsxs)("select",{id:"tiempoTemporizadorInput",value:y.tiempoTemporizador,onChange:e=>S(r=>({...r,tiempoTemporizador:parseInt(e.target.value)})),children:[(0,o.jsx)("option",{value:"15",children:"15 minutos"}),(0,o.jsx)("option",{value:"20",children:"20 minutos"}),(0,o.jsx)("option",{value:"30",children:"30 minutos"}),(0,o.jsx)("option",{value:"45",children:"45 minutos"}),(0,o.jsx)("option",{value:"60",children:"1 hora"}),(0,o.jsx)("option",{value:"90",children:"1.5 horas"}),(0,o.jsx)("option",{value:"120",children:"2 horas"})]})]}),(0,o.jsxs)("div",{className:"botones-panel",children:[(0,o.jsx)("button",{id:"guardarConfigBtn",onClick:q,children:"\uD83D\uDCBE Guardar Configuraci\xf3n"}),(0,o.jsx)("button",{id:"cancelarConfigBtn",onClick:()=>v(!1),children:"❌ Cancelar"}),(0,o.jsxs)("div",{style:{marginTop:"1.2rem",padding:"0.7rem 1vw",background:"rgba(34, 40, 49, 0.45)",borderRadius:"16px",color:"#f5f6fa",fontSize:"0.92rem",boxShadow:"0 8px 32px rgba(34,40,49,0.18)",width:"100%",textAlign:"left",display:"block",marginBottom:"0.5rem",backdropFilter:"blur(14px)",WebkitBackdropFilter:"blur(14px)",border:"1.5px solid rgba(44,62,80,0.22)",transition:"box-shadow 0.2s"},children:[(0,o.jsx)("div",{style:{fontWeight:"bold",marginBottom:"0.3rem",color:"#2b2d3d"},children:(0,o.jsxs)("span",{style:{fontSize:"1rem",color:"#f5f6fa",letterSpacing:"0.5px"},children:["\uD83D\uDCDD ",(0,o.jsx)("span",{style:{color:"#f5f6fa"},children:"Estado de la configuraci\xf3n actual"})]})}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"0.7rem",marginTop:"0.1rem",alignItems:"center",justifyContent:"flex-start"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{style:{fontWeight:"600",color:"#fbc531"},children:"\uD83D\uDCB0 Boleta:"}),(0,o.jsx)("br",{})," ",(0,o.jsxs)("span",{style:{fontWeight:"500",color:"#f5f6fa"},children:[y.valorBoleta," COP"]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{style:{fontWeight:"600",color:"#00a8ff"},children:"\uD83D\uDCC5 Inicio:"}),(0,o.jsx)("br",{})," ",(0,o.jsx)("span",{style:{fontWeight:"500",color:"#f5f6fa"},children:y.fechaInicioEvento||"No definida"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{style:{fontWeight:"600",color:"#e84118"},children:"\uD83C\uDFAF Sorteo:"}),(0,o.jsx)("br",{})," ",(0,o.jsx)("span",{style:{fontWeight:"500",color:"#f5f6fa"},children:y.fechaSorteo||"No definida"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{style:{fontWeight:"600",color:"#9c88ff"},children:"\uD83D\uDD50 Hora:"}),(0,o.jsx)("br",{})," ",(0,o.jsx)("span",{style:{fontWeight:"500",color:"#f5f6fa"},children:y.horaSorteo||"No definida"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{style:{fontWeight:"600",color:"#fdcb6e"},children:"⏳ Bloqueo:"}),(0,o.jsx)("br",{})," ",(0,o.jsxs)("span",{style:{fontWeight:"500",color:"#f5f6fa"},children:[y.horasAntesBloqueo,"h antes"]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{style:{fontWeight:"600",color:"#4cd137"},children:"⏰ Temporizador:"}),(0,o.jsx)("br",{})," ",(0,o.jsxs)("span",{style:{fontWeight:"500",color:"#f5f6fa"},children:[y.tiempoTemporizador," min"]})]}),(0,o.jsx)("div",{style:{gridColumn:"1/-1",marginTop:"0.3rem",fontWeight:"600",color:null===N()?"#f78fb3":0===N()?"#e84118":"#00a8ff",fontSize:"0.92em",background:"rgba(34,40,49,0.32)",borderRadius:"8px",padding:"0.3em 0.7em",boxShadow:"0 1px 4px rgba(44,62,80,0.07)"},children:null===N()?"⏳ No se puede calcular el cierre (faltan datos)":0===N()?"⚠️ La base de datos ya est\xe1 cerrada para registros.":"⏳ Faltan ".concat(N()," hora(s) para cerrar la base de datos.")})]})})]})]})]}),(0,o.jsx)("div",{className:"registro-scroll-area",style:{height:"420px",overflowY:"auto",width:"100%"},children:(0,o.jsx)("div",{className:"registro-list",id:"registro-list",children:[...r].sort((e,r)=>{let t=e.timestamp||0;return(r.timestamp||0)-t}).map(e=>(0,o.jsxs)("div",{className:"registro-item ".concat(e.status),style:{background:"pending"===e.status?"linear-gradient(135deg, #fff3cd, #ffeaa7)":"linear-gradient(135deg, #d4edda, #c3e6cb)",border:"2px solid ".concat("pending"===e.status?"#ffc107":"#28a745"),borderRadius:"10px",padding:"0.5rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",position:"relative",maxWidth:"95%",width:"95%",margin:"0 auto",cursor:"default"},children:[(0,o.jsx)("div",{style:{position:"absolute",top:"0.2rem",right:"0.2rem",background:"pending"===e.status?"#ffc107":"#28a745",color:"white",padding:"0.2rem 0.4rem",borderRadius:"6px",fontSize:"0.6rem",fontWeight:"bold",textTransform:"uppercase",zIndex:10,maxWidth:"85px",textAlign:"center"},children:"pending"===e.status?" Pendiente":" Confirmado"}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginTop:"0.4rem",marginBottom:"0.3rem",marginRight:"6rem"},children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{fontSize:"0.85rem",fontWeight:"bold",color:"#2c3e50",marginBottom:"0.1rem",wordBreak:"break-word"},children:["\uD83D\uDC64 ",e.name]}),(0,o.jsxs)("div",{style:{fontSize:"0.7rem",color:"#6c757d",marginBottom:"0.1rem",wordBreak:"break-all"},children:["\uD83D\uDCDE ",e.phone]}),(0,o.jsxs)("div",{style:{fontSize:"0.65rem",color:"#495057",wordBreak:"break-word"},children:["\uD83D\uDCC5 ",new Date(e.timestamp).toLocaleString()]})]}),(0,o.jsxs)("div",{style:{background:"rgba(0, 123, 255, 0.1)",border:"1px solid #007bff",borderRadius:"6px",padding:"0.4rem",textAlign:"center",minWidth:"80px",flexShrink:0},children:[(0,o.jsx)("div",{style:{fontSize:"0.6rem",color:"#495057",marginBottom:"0.1rem"},children:"\uD83D\uDCB0 Valor a pagar"}),(0,o.jsx)("div",{style:{fontSize:"0.9rem",fontWeight:"bold",color:"#007bff"},children:(e.numbers.length*m).toLocaleString("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0})}),(0,o.jsxs)("div",{style:{fontSize:"0.6rem",color:"#6c757d",marginTop:"0.1rem"},children:[e.numbers.length," n\xfamero",e.numbers.length>1?"s":""]})]})]}),(0,o.jsxs)("div",{style:{marginBottom:"0.3rem"},children:[(0,o.jsx)("div",{style:{fontSize:"0.65rem",color:"#495057",marginBottom:"0.15rem",fontWeight:"500"},children:"\uD83C\uDFAF N\xfameros seleccionados:"}),(0,o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(32px, 1fr))",gap:"0.1rem",maxHeight:"none",overflowY:"visible"},children:e.numbers.map(r=>(0,o.jsx)("span",{style:{background:"pending"===e.status?"#fff":"#f8f9fa",border:"1px solid ".concat("pending"===e.status?"#ffc107":"#28a745"),color:"pending"===e.status?"#856404":"#155724",padding:"0.15rem 0.05rem",borderRadius:"2px",fontSize:"0.6rem",fontWeight:"bold",textAlign:"center",minWidth:"30px"},children:r.toString().padStart(4,"0")},r))})]}),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:k?"column":"row",gap:"0.5rem",justifyContent:"center",alignItems:k?"stretch":"flex-end",marginTop:"0.2rem",minHeight:"40px"},children:[(0,o.jsxs)("div",{style:{display:"flex",flexDirection:k?"column":"row",gap:"0.5rem",alignItems:k?"stretch":"flex-end",width:k?"100%":"220px",justifyContent:"pending"===e.status?"flex-start":"flex-end"},children:["pending"===e.status&&(0,o.jsx)("div",{className:"temporizador",style:{background:"rgba(255, 193, 7, 0.15)",border:"2px solid #ffc107",borderRadius:"6px",padding:"0.4rem 0.8rem",textAlign:"center",width:k?"100%":"105px",marginBottom:k?"0.25rem":"0",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",whiteSpace:"nowrap"},children:(0,o.jsxs)("div",{style:{fontSize:"0.8rem",fontWeight:"bold",color:"#853e04ff"},children:["⏰ ",(e=>{let r=e-w;if(r<=0)return"Expirado";let t=Math.floor(r/36e5),o=Math.floor(r%36e5/6e4),n=Math.floor(r%6e4/1e3);return t>0?"".concat(t,":").concat(o.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0")):"".concat(o,":").concat(n.toString().padStart(2,"0"))})(e.timeoutEnd)]})}),"pending"===e.status&&(0,o.jsx)("button",{className:"btn-verificar",onClick:()=>L(e.id),style:{background:"linear-gradient(135deg, #28a745, #20c997)",color:"white",border:"none",padding:"0.5rem 0.9rem",borderRadius:"6px",fontWeight:"bold",cursor:"pointer",fontSize:"0.75rem",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(40, 167, 69, 0.3)",width:k?"100%":"auto",whiteSpace:"nowrap",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"110px"},onMouseOver:e=>{e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 3px 6px rgba(40, 167, 69, 0.4)"},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 4px rgba(40, 167, 69, 0.3)"},children:"Confirmar Pago"})]}),(0,o.jsx)("button",{onClick:()=>F(e.id),style:{background:"linear-gradient(135deg, #dc3545, #c82333)",color:"white",border:"none",padding:"0.5rem 0.9rem",borderRadius:"6px",fontWeight:"bold",cursor:"pointer",fontSize:"0.75rem",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(220, 53, 69, 0.3)",width:k?"100%":"auto",whiteSpace:"nowrap",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"90px"},onMouseOver:e=>{e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 3px 6px rgba(220, 53, 69, 0.4)"},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 4px rgba(220, 53, 69, 0.3)"},children:"Eliminar"})]})]},e.id))})})]})}let g=e=>{let{registro:r,isMobile:t,formatearTiempo:s,getTiempoRestante:a,calcularValorTotal:i,confirmarPago:l,eliminarRegistro:d}=e,[c,u]=(0,n.useState)(a(r.timeoutEnd));return(0,n.useEffect)(()=>{if("pending"!==r.status)return;let e=setInterval(()=>{u(a(r.timeoutEnd))},1e3);return()=>clearInterval(e)},[r.status,r.timeoutEnd,a]),(0,o.jsxs)("div",{className:"registro-item ".concat(r.status),style:{background:"pending"===r.status?"linear-gradient(135deg, #fff3cd, #ffeaa7)":"linear-gradient(135deg, #d4edda, #c3e6cb)",border:"2px solid ".concat("pending"===r.status?"#ffc107":"#28a745"),borderRadius:"10px",padding:"0.5rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",position:"relative",maxWidth:"95%",width:"95%",margin:"0 auto",cursor:"default"},children:[(0,o.jsx)("div",{style:{position:"absolute",top:"0.2rem",right:"0.2rem",background:"pending"===r.status?"#ffc107":"#28a745",color:"white",padding:"0.2rem 0.4rem",borderRadius:"6px",fontSize:"0.6rem",fontWeight:"bold",textTransform:"uppercase",zIndex:10,maxWidth:"85px",textAlign:"center"},children:"pending"===r.status?" Pendiente":" Confirmado"}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginTop:"0.4rem",marginBottom:"0.3rem",marginRight:"6rem"},children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{fontSize:"0.85rem",fontWeight:"bold",color:"#2c3e50",marginBottom:"0.1rem",wordBreak:"break-word"},children:["\uD83D\uDC64 ",r.name]}),(0,o.jsxs)("div",{style:{fontSize:"0.7rem",color:"#6c757d",marginBottom:"0.1rem",wordBreak:"break-all"},children:["\uD83D\uDCDE ",r.phone]}),(0,o.jsxs)("div",{style:{fontSize:"0.65rem",color:"#495057",wordBreak:"break-word"},children:["\uD83D\uDCC5 ",s(r.timestamp)]})]}),(0,o.jsxs)("div",{style:{background:"rgba(0, 123, 255, 0.1)",border:"1px solid #007bff",borderRadius:"6px",padding:"0.4rem",textAlign:"center",minWidth:"80px",flexShrink:0},children:[(0,o.jsx)("div",{style:{fontSize:"0.6rem",color:"#495057",marginBottom:"0.1rem"},children:"\uD83D\uDCB0 Valor a pagar"}),(0,o.jsx)("div",{style:{fontSize:"0.9rem",fontWeight:"bold",color:"#007bff"},children:i(r.numbers.length)}),(0,o.jsxs)("div",{style:{fontSize:"0.6rem",color:"#6c757d",marginTop:"0.1rem"},children:[r.numbers.length," n\xfamero",r.numbers.length>1?"s":""]})]})]}),(0,o.jsxs)("div",{style:{marginBottom:"0.3rem"},children:[(0,o.jsx)("div",{style:{fontSize:"0.65rem",color:"#495057",marginBottom:"0.15rem",fontWeight:"500"},children:"\uD83C\uDFAF N\xfameros seleccionados:"}),(0,o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(32px, 1fr))",gap:"0.1rem",maxHeight:"none",overflowY:"visible"},children:r.numbers.map(e=>(0,o.jsx)("span",{style:{background:"pending"===r.status?"#fff":"#f8f9fa",border:"1px solid ".concat("pending"===r.status?"#ffc107":"#28a745"),color:"pending"===r.status?"#856404":"#155724",padding:"0.15rem 0.05rem",borderRadius:"2px",fontSize:"0.6rem",fontWeight:"bold",textAlign:"center",minWidth:"30px"},children:e.toString().padStart(4,"0")},e))})]}),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:t?"column":"row",gap:"0.5rem",justifyContent:"center",alignItems:t?"stretch":"flex-end",marginTop:"0.2rem",minHeight:"40px"},children:[(0,o.jsxs)("div",{style:{display:"flex",flexDirection:t?"column":"row",gap:"0.5rem",alignItems:t?"stretch":"flex-end",width:t?"100%":"220px",justifyContent:"pending"===r.status?"flex-start":"flex-end"},children:["pending"===r.status&&(0,o.jsx)("div",{className:"temporizador",style:{background:"rgba(255, 193, 7, 0.15)",border:"2px solid #ffc107",borderRadius:"6px",padding:"0.4rem 0.8rem",textAlign:"center",width:t?"100%":"105px",marginBottom:t?"0.25rem":"0",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",whiteSpace:"nowrap"},children:(0,o.jsxs)("div",{style:{fontSize:"0.8rem",fontWeight:"bold",color:"#853e04ff"},children:["⏰ ",c]})}),"pending"===r.status&&l&&(0,o.jsx)("button",{className:"btn-verificar",onClick:()=>l(r.id,r.name),style:{background:"linear-gradient(135deg, #28a745, #20c997)",color:"white",border:"none",padding:"0.5rem 0.9rem",borderRadius:"6px",fontWeight:"bold",cursor:"pointer",fontSize:"0.75rem",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(40, 167, 69, 0.3)",width:t?"100%":"auto",whiteSpace:"nowrap",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"110px"},children:"Confirmar Pago"})]}),d&&(0,o.jsx)("button",{onClick:()=>d(r.id,r.name),style:{background:"linear-gradient(135deg, #dc3545, #c82333)",color:"white",border:"none",padding:"0.5rem 0.9rem",borderRadius:"6px",fontWeight:"bold",cursor:"pointer",fontSize:"0.75rem",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(220, 53, 69, 0.3)",width:t?"100%":"auto",whiteSpace:"nowrap",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"90px"},children:"Eliminar"})]})]})};function x(e){let{numeroBuscado:r,setNumeroBuscado:t,resultadoBusqueda:s,setResultadoBusqueda:a,registros:i,setRegistros:c,updateNumberStatus:u,pricePerTicket:m}=e,[p,h]=(0,n.useState)(!1),x=()=>{if(!r.trim())return void a({registros:[],numeroEncontrado:!1,mensaje:"Ingresa un n\xfamero para buscar"});h(!0),setTimeout(()=>{let e=r.toLowerCase().trim(),t=[],o="";if(/^\d{4}$/.test(e)){let r=parseInt(e),n=i.find(e=>e.numbers.includes(r)),s=parseInt(e.split("").reverse().join("")),a=i.find(e=>e.numbers.includes(s));t=[],n&&t.push(n),a&&(!n||n.id!==a.id)&&t.push(a),0===t.length?o="No se encontr\xf3 ganador ni segundo premio para ese n\xfamero.":(o="Resultado para el n\xfamero ".concat(e,":\n"),n&&(o+="Ganador: ".concat(n.name," (").concat(n.phone,")\n")),a&&(!n||n.id!==a.id)&&(o+="Segundo premio (invertido): ".concat(a.name," (").concat(a.phone,")")))}else if(/^\d{7,}$/.test(e)){let r=i.filter(r=>r.phone.includes(e));t=r,o=1===r.length?"Registro encontrado para el n\xfamero de celular: ".concat(r[0].phone):r.length>1?"Se encontraron ".concat(r.length," registros para el n\xfamero de celular."):"No se encontraron registros con ese celular"}else{let r=i.filter(r=>r.name.toLowerCase().includes(e));t=r,o=r.length>0?"Se encontraron ".concat(r.length," registro(s) por nombre"):"No se encontraron registros con ese nombre"}a({registros:t,numeroEncontrado:t.length>0,mensaje:o}),h(!1)},500)},f=async(e,r)=>{if(confirm("\xbfConfirmar pago para ".concat(r,"?")))try{await d(e,"verified");let r=i.findIndex(r=>r.id===e);if(-1!==r){let e=[...i];e[r].status="verified",c(e),u(e),x(),alert("Pago confirmado exitosamente.")}}catch(e){console.error("Error al confirmar pago:",e),alert("Error al confirmar el pago. Int\xe9ntalo de nuevo.")}},b=async(e,r)=>{if(confirm("\xbfEliminar registro de ".concat(r,"? Esta acci\xf3n no se puede deshacer.")))try{await l(e);let r=i.filter(r=>r.id!==e);c(r),u(r),x(),alert("Registro eliminado exitosamente.")}catch(e){console.error("Error al eliminar registro:",e),alert("Error al eliminar registro.")}},j=e=>new Date(e).toLocaleString(),v=e=>{let r=e-Date.now();if(r<=0)return"Expirado";let t=Math.floor(r/6e4),o=Math.floor(r%6e4/1e3);return"".concat(t,":").concat(o.toString().padStart(2,"0"))};return(0,o.jsxs)("section",{className:"busqueda-numeros glass",style:{marginTop:"2rem"},children:[(0,o.jsx)("h2",{children:"Buscar N\xfamero en Registros"}),(0,o.jsxs)("div",{className:"registro-search-wrapper",children:[(0,o.jsxs)("div",{className:"input-container",children:[(0,o.jsx)("input",{type:"text",id:"busquedaNumeroInput",placeholder:"N\xfamero de rifa o tel\xe9fono",maxLength:15,value:r,onChange:e=>t(e.target.value)}),(0,o.jsx)("button",{id:"clearBusquedaBtn",type:"button",title:"Limpiar b\xfasqueda",onClick:()=>{t(""),a(null)},children:"✖"})]}),(0,o.jsx)("button",{id:"busquedaNumeroBtn",type:"button",onClick:x,disabled:p,children:p?"Buscando...":"Buscar"})]}),(0,o.jsx)("div",{id:"resultadoBusqueda",children:s?(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{style:{textAlign:"center",marginBottom:"1rem",fontWeight:"bold"},children:s.mensaje}),s.registros.map(e=>(0,o.jsx)(g,{registro:e,isMobile:window.innerWidth<768,formatearTiempo:j,getTiempoRestante:v,calcularValorTotal:e=>{let r=e*("number"!=typeof m||isNaN(m)?0:m);return r>=0?r.toLocaleString("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}):"$0"},confirmarPago:f,eliminarRegistro:b},e.id))]}):(0,o.jsx)("p",{style:{color:"#6c757d",textAlign:"center",margin:"0"},children:"Ingresa un n\xfamero para comenzar la b\xfasqueda"})})]})}var f=t(6766);function b(){let[e,r]=(0,n.useState)(!1),t=()=>{r(!1),document.body.classList.remove("modal-open")};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"support-float ".concat(e?"hidden":""),id:"supportFloat",children:[(0,o.jsxs)("div",{className:"support-icon",onClick:()=>{r(!0),document.body.classList.add("modal-open")},children:[(0,o.jsx)("span",{className:"support-emoji",children:"\uD83D\uDCA1"}),(0,o.jsx)("div",{className:"support-pulse"})]}),(0,o.jsx)("div",{className:"support-tooltip",children:"\xbfC\xf3mo usar?"})]}),e&&(0,o.jsx)("div",{className:"support-modal",id:"supportModal",onClick:e=>{e.target===e.currentTarget&&t()},children:(0,o.jsxs)("div",{className:"support-modal-content",children:[(0,o.jsxs)("div",{className:"support-header",children:[(0,o.jsx)("h3",{children:"\xbfC\xf3mo participar en la rifa?"}),(0,o.jsx)("button",{className:"close-modal",onClick:t,children:"✖"})]}),(0,o.jsxs)("div",{className:"support-body",children:[(0,o.jsxs)("div",{className:"color-meanings",children:[(0,o.jsx)("h4",{children:"\uD83D\uDCCB Significado de los colores:"}),(0,o.jsxs)("div",{className:"color-legend",children:[(0,o.jsxs)("div",{className:"color-item",children:[(0,o.jsx)("div",{className:"color-circle green"}),(0,o.jsxs)("div",{className:"color-text",children:[(0,o.jsx)("div",{className:"color-name",children:"Verde"}),(0,o.jsx)("div",{className:"color-description",children:"N\xfameros disponibles para seleccionar"})]})]}),(0,o.jsxs)("div",{className:"color-item",children:[(0,o.jsx)("div",{className:"color-circle blue"}),(0,o.jsxs)("div",{className:"color-text",children:[(0,o.jsx)("div",{className:"color-name",children:"Azul"}),(0,o.jsx)("div",{className:"color-description",children:"N\xfameros seleccionados (pendientes de pago)"})]})]}),(0,o.jsxs)("div",{className:"color-item",children:[(0,o.jsx)("div",{className:"color-circle red"}),(0,o.jsxs)("div",{className:"color-text",children:[(0,o.jsx)("div",{className:"color-name",children:"Rojo"}),(0,o.jsx)("div",{className:"color-description",children:"N\xfameros ya vendidos (no disponibles)"})]})]}),(0,o.jsxs)("div",{className:"color-item",children:[(0,o.jsx)("div",{className:"color-circle gray"}),(0,o.jsxs)("div",{className:"color-text",children:[(0,o.jsx)("div",{className:"color-name",children:"Gris"}),(0,o.jsx)("div",{className:"color-description",children:"Registros cerrados"})]})]})]})]}),(0,o.jsxs)("div",{className:"support-options",children:[(0,o.jsxs)("div",{className:"support-option step",children:[(0,o.jsx)("div",{className:"support-icon-text",children:"\uD83C\uDFAF"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"Paso 1: Selecciona tus n\xfameros"}),(0,o.jsx)("span",{children:"Haz clic en los n\xfameros verdes que quieras para tu rifa. Puedes seleccionar varios."})]}),(0,o.jsx)("div",{className:"step-media",children:(0,o.jsx)(f.default,{src:"/paso_1.gif",alt:"Seleccionar n\xfameros",className:"step-gif",width:300,height:200,unoptimized:!0})})]}),(0,o.jsxs)("div",{className:"support-option step",children:[(0,o.jsx)("div",{className:"support-icon-text",children:"\uD83D\uDCDD"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"Paso 2: Registra tus datos"}),(0,o.jsx)("span",{children:"Completa el formulario con tu nombre y tel\xe9fono para registrar tu participaci\xf3n."})]}),(0,o.jsx)("div",{className:"step-media",children:(0,o.jsx)(f.default,{src:"/paso_2.gif",alt:"Registrar datos",className:"step-gif",width:300,height:200,unoptimized:!0})})]}),(0,o.jsxs)("div",{className:"support-option step",children:[(0,o.jsx)("div",{className:"support-icon-text",children:"\uD83D\uDCB0"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"Paso 3: Realiza el pago"}),(0,o.jsx)("span",{children:"Tienes 30 minutos para transferir el dinero. Incluye tu n\xfamero de celular en el mensaje."})]}),(0,o.jsx)("div",{className:"step-media",children:(0,o.jsx)(f.default,{src:"/paso_3.png",alt:"Realizar pago",className:"step-image",width:300,height:200})})]})]}),(0,o.jsxs)("div",{className:"support-options",children:[(0,o.jsxs)("div",{className:"support-option whatsapp",children:[(0,o.jsx)("div",{className:"support-icon-text",children:"\uD83D\uDCF1"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"WhatsApp"}),(0,o.jsx)("span",{children:"+57 300 123 4567"})]})]}),(0,o.jsxs)("div",{className:"support-option email",children:[(0,o.jsx)("div",{className:"support-icon-text",children:"\uD83D\uDCE7"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"Email"}),(0,o.jsx)("span",{children:"soporte@rifas.com"})]})]}),(0,o.jsxs)("div",{className:"support-option phone",children:[(0,o.jsx)("div",{className:"support-icon-text",children:"\uD83D\uDCDE"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"Tel\xe9fono"}),(0,o.jsx)("span",{children:"+57 1 234 5678"})]})]})]}),(0,o.jsxs)("div",{className:"support-hours",children:[(0,o.jsx)("p",{children:(0,o.jsx)("strong",{children:"Horarios de atenci\xf3n:"})}),(0,o.jsx)("p",{children:"Lunes a Viernes: 8:00 AM - 6:00 PM"}),(0,o.jsx)("p",{children:"S\xe1bados: 9:00 AM - 2:00 PM"})]})]})]})})]})}function j(){let{connectionStatus:e,selectedNumbers:r,numberStatus:t,loading:a,registrosBloquados:l,addSelectedNumber:d,removeSelectedNumber:g,clearSelectedNumbers:f,getTotalPrice:j,updateNumberStatus:v,registros:y,setRegistros:S,tiempoTemporizadorMinutos:N,setTiempoTemporizadorMinutos:C,pricePerTicket:D,setPricePerTicket:w,registrosLoading:B,setRegistrosLoading:k,getContadorRegistros:z,cargarConfiguracion:E,numeroBuscado:T,setNumeroBuscado:R,resultadoBusqueda:I,setResultadoBusqueda:W}=function(){let[e,r]=(0,n.useState)(new Set),[t,o]=(0,n.useState)([]),[a,l]=(0,n.useState)({}),[d,u]=(0,n.useState)(!0),[m,p]=(0,n.useState)(!1),[h,g]=(0,n.useState)(4e3),[x,f]=(0,n.useState)(30),[b,j]=(0,n.useState)(!1),[v,y]=(0,n.useState)(null),[S,N]=(0,n.useState)(""),[C,D]=(0,n.useState)(null),[w,B]=(0,n.useState)(!1),[k,z]=(0,n.useState)(!0),[E,T]=(0,n.useState)("connecting"),R=(0,n.useCallback)(e=>{console.log("Actualizando estado de n\xfameros con registros:",e);let r={};for(let e=0;e<=9999;e++)r[e]={status:"available"};e.forEach(e=>{e.numbers&&Array.isArray(e.numbers)&&e.numbers.forEach(t=>{t>=0&&t<=9999&&("verified"===e.status?r[t]={status:"confirmed",registroId:e.id}:"pending"===e.status&&(Date.now()<e.timeoutEnd?r[t]={status:"pending",registroId:e.id}:r[t]={status:"available"}))})}),console.log("Nuevo estado de n\xfameros:",Object.keys(r).length,"n\xfameros procesados"),l(r)},[]),I=(0,n.useCallback)(()=>{c(e=>{if(e&&(g(e.valorBoleta||4e3),f(e.tiempoTemporizador||30),e.fechaSorteo&&e.horaSorteo)){let r=new Date("".concat(e.fechaSorteo," ").concat(e.horaSorteo)),t=e.horasAntesBloqueo||2,o=new Date(r.getTime()-60*t*6e4);y(o),j(new Date>=o)}})},[]),W=(0,n.useCallback)(()=>{{let e=new URLSearchParams(window.location.search).get("token");if(e){let r=(0,s.KR)(i,"usuarios/".concat(e));(0,s.Jt)(r).then(e=>{B(e.exists()),z(!1)})}else B(!0),z(!1)}},[]);(0,n.useEffect)(()=>{console.log("Iniciando carga de datos..."),T("connecting"),W(),I();var e=e=>{console.log("Registros cargados en el hook:",e),o(e),R(e),u(!1),T("connected")};console.log("Cargando registros al iniciar...");let r=(0,s.KR)(i,"registros");(0,s.Jt)(r).then(r=>{let t=Object.values(r.val()||{});console.log("Registros cargados al iniciar:",t.length),e(t)}).catch(r=>{console.error("Error al cargar registros al iniciar:",r),e([])});let t=function(e){console.log("Configurando escucha de registros en tiempo real...");let r=(0,s.KR)(i,"registros"),t=(0,s.Zy)(r,r=>{let t=Object.values(r.val()||{});console.log("Registros actualizados en tiempo real:",t.length),e(t)},e=>{console.error("Error en la escucha de registros:",e)});return()=>{console.log("Cancelando escucha de registros..."),t()}}(e=>{console.log("Registros actualizados en tiempo real en el hook:",e),o(e),R(e),T("connected")}),n=function(e){let r=(0,s.KR)(i,"configuracion/registrosBloqueados");return(0,s.Zy)(r,r=>{e(r.val())}),()=>(0,s.AU)(r)}(e=>{console.log("Estado de bloqueo actualizado:",e),j(e)});return()=>{console.log("Limpiando suscripciones..."),t(),n()}},[I,R,W]);let A=(0,n.useCallback)(e=>{r(r=>new Set([...r,e]))},[]),q=(0,n.useCallback)(e=>{r(r=>{let t=new Set(r);return t.delete(e),t})},[]),L=(0,n.useCallback)(()=>{r(new Set)},[]),F=(0,n.useCallback)(()=>e.size*h,[e.size,h]),M=(0,n.useCallback)(()=>({confirmados:t.filter(e=>"verified"===e.status).length,pendientes:t.filter(e=>"pending"===e.status).length}),[t]);return{selectedNumbers:e,registros:t,numberStatus:a,loading:d,registrosLoading:m,pricePerTicket:h,tiempoTemporizadorMinutos:x,registrosBloquados:b,fechaLimiteRegistros:v,numeroBuscado:S,resultadoBusqueda:C,tieneAccesoRegistros:w,verificandoAcceso:k,connectionStatus:E,setSelectedNumbers:r,setRegistros:o,setRegistrosLoading:p,setPricePerTicket:g,setTiempoTemporizadorMinutos:f,setNumeroBuscado:N,setResultadoBusqueda:D,setConnectionStatus:T,addSelectedNumber:A,removeSelectedNumber:q,clearSelectedNumbers:L,getTotalPrice:F,getContadorRegistros:M,updateNumberStatus:R,cargarConfiguracion:I}}();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u,{connectionStatus:e}),(0,o.jsxs)("main",{className:"container",children:[(0,o.jsx)(m,{selectedNumbers:r,numberStatus:t,loading:a,addSelectedNumber:d,removeSelectedNumber:g,registrosBloquados:l}),(0,o.jsx)(p,{selectedNumbers:r,tiempoTemporizadorMinutos:N,registrosBloquados:l,clearSelectedNumbers:f,getTotalPrice:j,updateNumberStatus:v,registros:y,setRegistros:S,removeSelectedNumber:g}),(0,o.jsx)(h,{registros:y,registrosLoading:B,setRegistrosLoading:k,getContadorRegistros:z,pricePerTicket:D,setPricePerTicket:w,tiempoTemporizadorMinutos:N,setTiempoTemporizadorMinutos:C,cargarConfiguracion:E,setRegistros:S,updateNumberStatus:v}),(0,o.jsx)(x,{numeroBuscado:T,setNumeroBuscado:R,resultadoBusqueda:I,setResultadoBusqueda:W,registros:y,setRegistros:S,updateNumberStatus:v,pricePerTicket:D}),(0,o.jsxs)("div",{style:{padding:"2rem",color:"white"},children:[(0,o.jsx)("p",{children:"✅ Aplicaci\xf3n completa funcionando correctamente!"}),(0,o.jsxs)("p",{children:["Registros encontrados: ",y.length]}),(0,o.jsxs)("p",{children:["Conexi\xf3n: ",e]})]})]}),(0,o.jsx)(b,{})]})}function v(){return(0,o.jsx)(j,{})}}},e=>{e.O(0,[595,312,441,964,358],()=>e(e.s=3385)),_N_E=e.O()}]);